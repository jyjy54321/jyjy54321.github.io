<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="jumbotron bg-info">
      <h1>作業:2021年全球晶圓代工市率(創建表格)</h1>
    </div>
    <div id="container"></div>

    <script>
      const marketingSHare = {
        publish: "2021/12/31",
        version: "1.0",
        titles: ["排名", "公司名稱", "國別", "市佔率"],
        data: [
          { Ranking: 1, Name: "台積電", Country: "台灣", Ratio: 53.1 },
          { Ranking: 2, Name: "三星電子", Country: "韓國", Ratio: 17.3 },
          { Ranking: 3, Name: "聯電", Country: "台灣", Ratio: 7.2 },
          { Ranking: 4, Name: "格羅方德", Country: "美國", Ratio: 6.1 },
          { Ranking: 5, Name: "中芯國際", Country: "中國", Ratio: 5.3 },
          { Ranking: 6, Name: "華虹半導體", Country: "中國", Ratio: 2.6 },
          { Ranking: 7, Name: "力積電", Country: "台灣", Ratio: 1.8 },
          { Ranking: 8, Name: "世界先進", Country: "台灣", Ratio: 1.4 },
          { Ranking: 9, Name: "高塔半導體", Country: "以色列", Ratio: 1.4 },
          { Ranking: 10, Name: "東部高科", Country: "南韓", Ratio: 1 },
        ],
      };

      let marketingSHare2dArray = [];

      let container;
      let table, thead, tbody;

      window.onload = function () {
        container = document.getElementById("container"); //選取div
        table = document.createElement("table"); //新增一個table元素
        table.setAttribute(
          "class",
          "table table-bordered table-striped table-dark"
        );
        thead = document.createElement("thead");
        tbody = document.createElement("tbody");

        CreateThead(marketingSHare.titles);

        // 轉成二維陣列 讓原本資料只剩下數值
        marketingSHare.data.forEach((data) => {
          let values = Object.values(data);
          marketingSHare2dArray.push(values); //將數值塞入陣列
        });
        CreateTbody(marketingSHare2dArray);
      };

      function CreateThead(titleArray) {
        //(1)先建立tr
        let theadTR = document.createElement("tr");
        //(2)建立th,設定資料,th加入tr
        titleArray.forEach((title, index) => {
          let th = document.createElement("th");
          th.innerText = title;
          theadTR.append(th);
        });

        thead.append(theadTR);
        table.append(thead);
        container.append(table);
      }

      function CreateTbody(RankingName) {
        RankingName.forEach((ranking) => {
          //(1)先建立tr
          let tr = document.createElement("tr");
          //(2)建立td,設定資料,td加入tr
          ranking.forEach((data) => {
            let td = document.createElement("td");
            td.innerText = data;

            tr.append(td);
          });
          tbody.append(tr);
        });
        table.append(tbody);
      }
    </script>
  </body>
</html>
